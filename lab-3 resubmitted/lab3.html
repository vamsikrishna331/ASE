<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"> 
<title>Google maps with tmperature and hurriance tweets</title>
<link href="http://code.google.com/apis/maps/documentation/javascript/examples/standard.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false&libraries=weather"></script>
<script type="text/javascript">

var map;var markerArray = [];var infoHtml;var infowindow = new google.maps.InfoWindow();
var currentcount = 0;var hurricanecount = 0;var updated;var content;var link;var img;
var author;var loc;var showvar;var timeoutvar;var timer;var geocoder;
function TwitImgControl(controlDiv, map) {
 var controlUI = document.createElement('DIV');
 controlDiv.appendChild(controlUI);
 var controlText = document.createElement('DIV');

  controlText.innerHTML = '<a href="http://www.twitter.com/vamsi331"><img src="http://twitter-badges.s3.amazonaws.com/follow_me-b.png" alt="Follow v@m$! on Twitter"/></a>';
  controlUI.appendChild(controlText);
}
function initialize() {
  var mapDiv = document.getElementById('map_canvas');
  geocoder = new google.maps.Geocoder();
  var myOptions = {
    zoom: 8,
    center: new google.maps.LatLng(40,-74),
    mapTypeControl: true,
    mapTypeControlOptions: {
      style: google.maps.MapTypeControlStyle.DROPDOWN_MENU
    },
    zoomControl: true,
    zoomControlOptions: {
      style: google.maps.ZoomControlStyle.SMALL
    },
    mapTypeId: google.maps.MapTypeId.SATELLITE
  }
  map = new google.maps.Map(mapDiv, myOptions);

  var twitimgControlDiv = document.createElement('DIV');
  var twitimgControl = new TwitImgControl(twitimgControlDiv, map);

  twitimgControlDiv.index = 1;
  map.controls[google.maps.ControlPosition.RIGHT].push(twitimgControlDiv);

 
        var weatherLayer = new google.maps.weather.WeatherLayer({
          temperatureUnits: google.maps.weather.TemperatureUnit.FAHRENHEIT
        });
        weatherLayer.setMap(map);

        var cloudLayer = new google.maps.weather.CloudLayer();
        cloudLayer.setMap(map);
  

  sandytweets();
                         }
     function sandytweets() {
   //alert (val);
   clearTimeout(timer);
   var request;
   if (window.XMLHttpRequest) {
       request = new XMLHttpRequest();
   } else {
       request = new ActiveXObject("Microsoft.XMLHTTP");
   }

   var url;
                           
                                   
   url = 'sandytweet.php';
   //alert (url);                          
   request.open('GET', url, true);
   request.onreadystatechange = function() {
    	if(request.readyState == 4 && request.status == 200) {
  	    parseNewsResult(request);
    	} 
   };
   request.send(null);

}
function parseNewsResult(request) {
   var xmlDoc = request.responseXML;
   var items = xmlDoc.getElementsByTagName("item");                       
   hurricanecount = items.length;
   if (hurricanecount == 0) {
       return;
   } 
   </script>                                                                      
<link href="styles.css" rel="stylesheet" type="text/css">
</head>
<body leftMargin=0 topMargin=0 marginwidth="0" marginheight="0"onload="initialize()" style="height:100%;margin:0">
  <div id="map_canvas" style="width: 100%; height: 90%"></div>

<div id="map_select" style="width: 95%">
<table>
<tr width="100%">
<td width="60%" align="left"><a href="http://www.vamsikrishna.com">v@m$! krishna UMKC</a><br><b>Hurriance tweets mapping</b><br>
<td width="40%" align="right">
<script type="text/javascript"><!--
</body>
</html>